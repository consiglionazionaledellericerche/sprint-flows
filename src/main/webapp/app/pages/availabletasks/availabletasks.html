<div ng-cloak>

<ul class="nav nav-pills nav-justified">
  <li role="presentation" ng-class="{'active': assegnatiAMe}">
    <a class="pointer" ng-click="compitiAssegnatiAMe()" data-toggle="tab"><h3><i class="glyphicon glyphicon-inbox"></i> compiti assegnati a me: {{vm.summary.total}}</h3><small>seleziona per avere la lista completa dei compiti assegnati a me</small></a>
  </li>
  <li role="presentation" ng-class="{'active-info': !assegnatiAMe}">
    <a class="pointer" ng-click="compitiDaPrendereInCarico()" data-toggle="tab"><h3><i class="glyphicon glyphicon-user"></i> compiti di gruppo da prendere in carico: {{vm.pooledTask}}</h3><small>seleziona per avere la lista dei compiti di gruppo da prendere in carico</small></a>
  </li>
</ul>
<br>
<div class="tab-content">
  <div class="col-md-6">
    <div class="progress">
      <div class="progress-bar progress-bar-primary progress-bar-striped" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: {{100 * vm.summary.total / (pooledTask + vm.summary.total)}}%">
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="progress">
      <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: {{100 * vm.pooledTask / (vm.pooledTask + vm.summary.total)}}%">
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <button class="btn btn-default btn-block margin-top-20" ng-click="advanced = !advanced"><span class="glyphicon" ng-class="{'glyphicon-wrench': !advanced, 'glyphicon-tasks': advanced}"></span> modalit√† {{advanced ? 'semplice' : 'avanzata'}}</button>

    <div ng-show="advanced">
      <h4>Tipologie</h4>
      <workflow-types criteria="criteria" filters="true" reset-filters="resetFilters" select-process-definition-key="selectProcessDefinitionKey"
      process-definitions = "processDefinitions"></workflow-types>
    </div>
  </div>
  <div class="col-md-9">
    <h3><span class="label" ng-class="{'label-info': !assegnatiAMe, 'label-primary': assegnatiAMe}"><i ng-class="{'glyphicon glyphicon-user': !assegnatiAMe, 'glyphicon glyphicon-inbox': assegnatiAMe}"></i> {{assegnatiAMe ? 'Lista dei compiti assegnati a me' : 'Lista dei compiti di gruppo da prendere in carico'}}</span></h3>
    <task-list tasks="tasks" advanced="advanced" paging="paging" class="tasks" 
        metadata-fields="metadataFields" refresh-progess-bar = "refreshProgessBar" select-process-definition-key="selectProcessDefinitionKey"
      process-definitions = "processDefinitions"></task-list>
  </div>
  <pre ng-show="development">
    {{tasks | json}}
  </pre>
  <pre>{{vm | json}}</pre>
</div>
</div>
