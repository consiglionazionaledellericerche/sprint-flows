<div ng-cloak>
  <div class="row form-group">
    <div class="col-md-12">
      <uib-tabset active="activePill" justified="true" type="pills" ng-init="activeContent = 'available'"> <uib-tab index="0" select="setActiveContent('assignedToMe')"> <uib-tab-heading>
        <h3>
          <i class="glyphicon glyphicon-inbox"></i>
          Compiti assegnati a me: {{vm.myTasks.total}}
        </h3>
      </uib-tab-heading> </uib-tab> <uib-tab index="1" classes="available" select="setActiveContent('available')"> <uib-tab-heading>
        <h3>
          <i class="glyphicon glyphicon-user"></i>
          Compiti di gruppo <br> da prendere in carico: {{vm.pooledTasks.total}}
        </h3>
      </uib-tab-heading> </uib-tab> </uib-tabset>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="progress">
        <uib-progress>
          <uib-bar class="progress-bar-striped" value="100* vm.myTasks.total/(vm.pooledTasks.total+ vm.myTasks.total)" type="primary">
            <span>{{vm.myTasks.total}}</span>
          </uib-bar>
          <uib-bar class="progress-bar-striped" value="100* vm.pooledTasks.total/(vm.pooledTasks.total+ vm.myTasks.total)" type="info">
            <span>{{vm.pooledTasks.total}}</span>
          </uib-bar>
        </uib-progress>
      </div>
    </div>

    <div class="col-md-3">
      <button class="btn btn-default btn-block margin-top-20" ng-click="advanced = !advanced">
        <span class="glyphicon" ng-class="{'glyphicon-wrench': !advanced, 'glyphicon-tasks': advanced}"></span>
        modalit√† {{advanced ? 'semplice' : 'avanzata'}}
      </button>

      <div ng-show="advanced">
        <h4>Tipologie</h4>
        <workflow-types criteria="criteria" filters="true" reset-filters="resetFilters" select-process-definition-key="selectProcessDefinitionKey" process-definitions="processDefinitions"></workflow-types>
      </div>
    </div>

    <div class="col-md-9" ng-show="activeContent == 'assignedToMe'">
      <h3>
        <span class="label label-primary" class="assegnatiAMe">
          <i class="glyphicon-inbox"></i>
          Lista dei compiti assegnati a me
        </span>
      </h3>
      <tasklist tasks="vm.myTasks.data" advanced="advanced" paging="paging" class="tasks" detailed="detailed" select-process-definition-key="selectProcessDefinitionKey" process-definitions="processDefinitions" is-active-flows="false" />
    </div>
    <div class="col-md-9" ng-show="activeContent == 'available'">
      <h3>
        <span class="label label-info" ng-class="label-info">
          <i class="glyphicon glyphicon-user"></i>
          Lista dei compiti di gruppo da prendere in carico
        </span>
      </h3>
      <tasklist tasks="vm.pooledTasks.data" advanced="advanced" paging="paging" class="tasks" detailed="detailed" select-process-definition-key="selectProcessDefinitionKey" process-definitions="processDefinitions" is-active-flows="false" />
    </div>
  </div>
</div>
<pre ng-show="development">
  {{tasks | json}}
</pre>
<pre>{{vm | json}}</pre>
</div>
